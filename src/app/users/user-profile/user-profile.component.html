<div class="page-wrapper p-16">
  <mat-card class="outline mat-elevation-z0 m-b-16">
    <mat-card-header>
      <mat-card-title>{{ 'User Profile' | translate }}</mat-card-title>
    </mat-card-header>
    <div *ngIf="userProfileData">
      <form [formGroup]="userProfile" (ngSubmit)="onSubmit(userProfile.value)">
        <mat-card-content class="scroll">
          <div class="row">
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Title' | translate }}</mat-label>
                <input [id]="'inputTitle_' + componentId" matInput type="text" formControlName="title" />
                <mat-error>{{ 'Title is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'First Name' | translate }}</mat-label>
                <input [id]="'inputName_' + componentId" matInput type="text" formControlName="name" />
                <mat-error>{{ 'Name is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Last Name' | translate }}</mat-label>
                <input [id]="'inputLastName_' + componentId" matInput type="text" formControlName="lastName" />
                <mat-error>{{ 'Last name is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Department' | translate }}</mat-label>
                <input [id]="'inputDepartment_' + componentId" matInput type="text" formControlName="department" />

                <mat-error>{{ 'Department is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Email' | translate }}</mat-label>
                <input [id]="'inputEmail_' + componentId" matInput type="text" formControlName="email" />
                <mat-error>{{ 'Email is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Phone' | translate }}</mat-label>
                <input [id]="'inputPhone_' + componentId" matInput type="number" formControlName="phone" />
                <mat-error>{{ 'Phone is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Country' | translate }}</mat-label>
                <input [id]="'inputCountry_' + componentId" matInput type="text" formControlName="country" />
                <mat-error>{{ 'Country is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'City' | translate }}</mat-label>
                <input [id]="'inputCity_' + componentId" matInput type="text" formControlName="city" />

                <mat-error>{{ 'City is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Address' | translate }}</mat-label>
                <input [id]="'inputAddress_' + componentId" matInput type="text" formControlName="address" />

                <mat-error>{{ 'Address is required' | translate }}</mat-error>
              </mat-form-field>
            </div>
          </div>
        </mat-card-content>

        <div class="text-right pr-1">
          <button [id]="'save_' + componentId" mat-flat-button color="primary" [disabled]="userProfile.invalid" type="submit">
            <app-icon [name]="'save'"></app-icon> {{ 'Save' | translate }}
          </button>
        </div>
      </form>
    </div>
  </mat-card>
  <!-- <ng-template #noUserData>
    <app-registration></app-registration>
  </ng-template> -->

  <mat-card class="outline mat-elevation-z0 m-b-16">
    <mat-card-header>
      <mat-card-title>{{ 'Company Details' | translate }}</mat-card-title>
    </mat-card-header>
    <div *ngIf="userProfileData.companyPublicId; else error">
      <ng-container *ngIf="companyData; else noData">
        <mat-card-content>
          <div class="row">
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Company Name' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.name" />
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Email' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.email" />
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Phone' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.phone" />
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Country' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.country" />
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'City' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.city" />
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Address' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.address" />
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'VAT Number' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.vatNr" />
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Tax Number' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.taxNumber" />
              </mat-form-field>
            </div>
            <div class="col-lg-4">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'ZIP' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.zip" />
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'Notes' | translate }}</mat-label>
                <input matInput type="text" disabled [(ngModel)]="companyData.notes" />
              </mat-form-field>
            </div>
          </div>
        </mat-card-content>
      </ng-container>
    </div>

    <ng-template #error>
      <mat-card-content>
        <div class="info-box error">
          {{ 'If you are seeing this message please contact the admins for help !' | translate }}
        </div>
      </mat-card-content>
    </ng-template>

    <ng-template #noData>
      <div class="justify-content-center mx-auto d-block d-md-flex align-items-center no-data-buttons">
        <button [id]="'select_' + componentId" mat-flat-button color="primary" (click)="selectCompany()">
          {{ 'Select From Existing Companies' | translate }}
        </button>
        <p class="mx-3 text-center">
          <strong>{{ 'OR' | translate }}</strong>
        </p>
        <button [id]="'create_' + componentId" mat-flat-button color="primary" (click)="createCompany()">
          {{ 'Create New Company' | translate }}
        </button>
      </div>

      <hr class="my-4" *ngIf="isSelectCompanyClicked || isCreateCompanyClicked" />
      <div class="justify-content-center row mx-auto" *ngIf="isSelectCompanyClicked">
        <div class="col-8 col-lg-4">
          <mat-form-field appearance="outline">
            <mat-label> {{ 'Select Company' | translate }}</mat-label>
            <mat-select>
              <mat-option></mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-4 col-lg-2">
          <button [id]="'save_' + componentId" mat-flat-button color="primary" class="align-self-start">
            <app-icon [name]="'save'"></app-icon> {{ 'Save' | translate }}
          </button>
        </div>
      </div>

      <div *ngIf="isCreateCompanyClicked">
        <app-company></app-company>
      </div>
    </ng-template>
  </mat-card>
  <!-- Start page setting -->
  <app-user-settings [userId]="userProfileData.id" (onChange)="newChange($event)"></app-user-settings>

  <!-- User Sorting Settings -->
  <app-user-sorting-settings [userId]="userProfileData.id" (onChange)="newChange($event)"></app-user-sorting-settings>

  <!-- Date format -->
  <app-date-format [userId]="userProfileData.id" [tenantId]="tenantId" (onChange)="newChange($event)"></app-date-format>

  <!-- Notification Topic Setting -->
  <app-notification-topics-setting [userId]="userId"></app-notification-topics-setting>

  <!-- Clear local storage and logout -->
  <app-clear-storage></app-clear-storage>

  <app-evoked-answer-settings [userId]="userId"></app-evoked-answer-settings>

  <!-- Upload Profile Picture -->
  <app-upload-profile-picture (updatePhoto)="onPhotoChange($event)"></app-upload-profile-picture>
</div>
